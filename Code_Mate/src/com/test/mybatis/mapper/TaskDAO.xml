<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">				

<mapper namespace="com.test.mybatis.dao.ITaskDAO">

	<select id="list" resultType="com.test.mybatis.dto.TaskDTO">
		SELECT A.TASK_CODE, A.TITLE, A.CONTENT, A.STARTDATE, A.ENDDATE, A.KDATE, A.MA_CODEP, M.NICKNAME, M.MEM_CODE
		FROM (SELECT TASK_CODE, TITLE, CONTENT, TO_CHAR(SDATE, 'YYYY-MM-DD') AS STARTDATE, TO_CHAR(EDATE, 'YYYY-MM-DD') AS ENDDATE, KDATE, MA_CODEP 
			  FROM TASK
			  WHERE CP_CODE = #{arg0}
			  ORDER BY KDATE DESC) A JOIN MEMBER_APPLY MA ON MA_CODEP = MA.MA_CODE
			  						 JOIN "MEMBER" m ON MA.MEM_CODE = M.MEM_CODE
	</select>
	
	<select id="getWriter" resultType="java.lang.String">
		SELECT MEM_CODE
		FROM MEMBER_APPLY
		WHERE MA_CODE = #[arg0]
	</select>
	
</mapper>































